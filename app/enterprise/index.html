<!DOCTYPE html>
<html>
<head>
    <title>å¾®ä¿¡æ¥å£è°ƒè¯•</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <meta name="description" content="Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description.
">

    <link rel="stylesheet" href="src/lib/weui.min.css">
    <link rel="stylesheet" href="src/lib/jquery-weui.min.css">
    <link rel="stylesheet" href="css/demos.css">
</head>

<body ontouchstart>
<div class="weui_tab">
    <div class="weui_tab_bd">
        <div id="tab1" class="weui_tab_bd_item">
            <header class='demos-header'>
                <h1 class="demos-title">è®¤è¯æ¥å£</h1>
                <p class='demos-sub-title'>æ¥å£è°ƒè¯•</p>
            </header>
            <div class="weui_grids">
                <a href="#" onclick="goApi(this)" data-action="userInfo" class="weui_grid js_grid">
                    <div class="weui_grid_icon">
                        <img src="images/icon_nav_button.png" alt="">
                    </div>
                    <p class="weui_grid_label">
                        è·å–ç”¨æˆ·ä¿¡æ¯
                    </p>
                </a>
                <a href="#" onclick="goApi(this)" data-action="login" class="weui_grid js_grid">
                    <div class="weui_grid_icon">
                        <img src="images/icon_nav_cell.png" alt="">
                    </div>
                    <p class="weui_grid_label">
                        ç™»é™†
                    </p>
                </a>
            </div>
        </div>
        <div id="tab2" class="weui_tab_bd_item">
            <header class='demos-header'>
                <h1 class="demos-title">èµ„æºæ¥å£</h1>
                <p class='demos-sub-title'>æ¥å£è°ƒè¯•</p>
            </header>
            <div class="weui_grids">
                <a href="#" onclick="goApi(this)" data-action="getAgent" class="weui_grid js_grid">
                    <div class="weui_grid_icon">
                        <img src="images/icon_nav_cell.png" alt="">
                    </div>
                    <p class="weui_grid_label">
                        è·å–åº”ç”¨
                    </p>
                </a>
                <a href="#" onclick="goApi(this)" data-action="setAgent" class="weui_grid js_grid">
                    <div class="weui_grid_icon">
                        <img src="images/icon_nav_dialog.png" alt="">
                    </div>
                    <p class="weui_grid_label">
                        è®¾ç½®åº”ç”¨
                    </p>
                </a>

                <a href="#" onclick="goApi(this)" data-action="getAgents" class="weui_grid js_grid">
                    <div class="weui_grid_icon">
                        <img src="images/icon_nav_progress.png" alt="">
                    </div>
                    <p class="weui_grid_label">
                        è·å–æ‰€æœ‰åº”ç”¨
                    </p>
                </a>

                <a href="#" onclick="goApi(this)" data-action="getMenu" class="weui_grid js_grid">
                    <div class="weui_grid_icon">
                        <img src="images/icon_nav_msg.png" alt="">
                    </div>
                    <p class="weui_grid_label">
                        è·å–èœå•
                    </p>
                </a>
                <a href="#" onclick="goApi(this)" data-action="getContact" class="weui_grid js_grid">
                    <div class="weui_grid_icon">
                        <img src="images/icon_nav_article.png" alt="">
                    </div>
                    <p class="weui_grid_label">
                        è·å–é€šè®¯éƒ¨é—¨
                    </p>
                </a>
                <a href="#" onclick="goApi(this)" data-action="getUser" class="weui_grid js_grid">
                    <div class="weui_grid_icon">
                        <img src="images/icon_nav_actionSheet.png" alt="">
                    </div>
                    <p class="weui_grid_label">
                        è·å–æˆå‘˜
                    </p>
                </a>
                <a href="#" onclick="goApi(this)" data-action="getTagUser" class="weui_grid js_grid">
                    <div class="weui_grid_icon">
                        <img src="images/icon_nav_actionSheet.png" alt="">
                    </div>
                    <p class="weui_grid_label">
                        è·å–æ ‡ç­¾æˆå‘˜
                    </p>
                </a>
                <a href="#" onclick="goApi(this)" data-action="getBranchUser" class="weui_grid js_grid">
                    <div class="weui_grid_icon">
                        <img src="images/icon_nav_icons.png" alt="">
                    </div>
                    <p class="weui_grid_label">
                        è·å–éƒ¨é—¨æˆå‘˜
                    </p>
                </a>
                <a href="#" onclick="goApi(this)" data-action="getBranchUserDetail" class="weui_grid js_grid">
                    <div class="weui_grid_icon">
                        <img src="images/icon_nav_panel.png" alt="">
                    </div>
                    <p class="weui_grid_label">
                        éƒ¨é—¨æˆå‘˜è¯¦æƒ…
                    </p>
                </a>

                <a href="JavaScript:tempFile();" class="weui_grid js_grid">
                    <div class="weui_grid_icon">
                        <img src="images/icon_nav_tab.png" alt="">
                    </div>
                    <p class="weui_grid_label">
                        ä¸Šä¼ ä¸´æ—¶è”¬èœ
                    </p>
                </a>
                <a href="JavaScript:foreverFile();" class="weui_grid js_grid">
                    <div class="weui_grid_icon">
                        <img src="images/icon_nav_search_bar.png" alt="">
                    </div>
                    <p class="weui_grid_label">
                        ä¸Šä¼ æ°¸ä¹…è”¬èœ
                    </p>
                </a>
                <a href="#" onclick="goApi(this)" data-action="getFodder" class="weui_grid js_grid">
                    <div class="weui_grid_icon">
                        <img src="images/icon_nav_msg.png" alt="">
                    </div>
                    <p class="weui_grid_label">
                        è·å–ç´ æ
                    </p>
                </a>
                <a href="#" onclick="goApi(this)" data-action="getFodderDetail" class="weui_grid js_grid">
                    <div class="weui_grid_icon">
                        <img src="images/icon_nav_ptr.png" alt="">
                    </div>
                    <p class="weui_grid_label">
                        è·å–æŸä¸ªç´ æ
                    </p>
                </a>
                <a href="#" onclick="goApi(this)" data-action="delUpload" class="weui_grid js_grid">
                    <div class="weui_grid_icon">
                        <img src="images/icon_nav_up.png" alt="">
                    </div>
                    <p class="weui_grid_label">
                        åˆ é™¤èµ„æº
                    </p>
                </a>
            </div>
        </div>
        <div id="tab3" class="weui_tab_bd_item">
            <header class='demos-header'>
                <h1 class="demos-title">èƒ½åŠ›æ¥å£</h1>
                <p class='demos-sub-title'>æ¥å£è°ƒè¯•</p>
            </header>
            <div class="weui_grids">
                <a href="#" onclick="goApi(this)" data-action="message" class="weui_grid js_grid">
                    <div class="weui_grid_icon">
                        <img src="images/icon_nav_toast.png" alt="">
                    </div>
                    <p class="weui_grid_label">
                        å‘é€æ¶ˆæ¯
                    </p>
                </a>
            </div>
        </div>
        <div id="tab4" class="weui_tab_bd_item weui_tab_bd_item_active">
            <header class='demos-header'>
                <h1 class="demos-title">å…¬ä¼—å·è°ƒè¯•</h1>
                <p class='demos-sub-title' id="weixinLogin" style="color: red">è¿˜æœªç™»å½•</p>
            </header>
            <div class="weui_grids">
                
                <a onclick="goWeixin(this)" data-action="login" class="weui_grid js_grid">
                    <div class="weui_grid_icon">
                        <img src="images/icon_nav_cell.png" alt="">
                    </div>
                    <p class="weui_grid_label">
                        å¾®ä¿¡ç™»é™†
                    </p>
                </a>
                <a onclick="goWeixin(this)" data-action="userInfo" class="weui_grid js_grid">
                    <div class="weui_grid_icon">
                        <img src="images/icon_nav_picker.png" alt="">
                    </div>
                    <p class="weui_grid_label">
                        ç”¨æˆ·ä¿¡æ¯
                    </p>
                </a>
                <a onclick="goWeixin(this)" data-action="normalPay" class="weui_grid js_grid">
                    <div class="weui_grid_icon">
                        <img src="images/icon_nav_calendar.png" alt="">
                    </div>
                    <p class="weui_grid_label">
                        ç»Ÿä¸€ä¸‹å•
                    </p>
                </a>
                <a onclick="goWeixin(this)" data-action="orderQuery" class="weui_grid js_grid">
                    <div class="weui_grid_icon">
                        <img src="images/icon_nav_city.png" alt="">
                    </div>
                    <p class="weui_grid_label">
                        è®¢å•æŸ¥è¯¢
                    </p>
                </a>
                <a onclick="goWeixin(this)" data-action="orderRefund" class="weui_grid js_grid">
                    <div class="weui_grid_icon">
                        <img src="images/icon_nav_datetime.png" alt="">
                    </div>
                    <p class="weui_grid_label">
                        è®¢å•é€€æ¬¾
                    </p>
                </a>
                <a onclick="goWeixin(this)" data-action="refundQuery" class="weui_grid js_grid">
                    <div class="weui_grid_icon">
                        <img src="images/icon_nav_swiper.png" alt="">
                    </div>
                    <p class="weui_grid_label">
                        é€€æ¬¾æŸ¥è¯¢
                    </p>
                </a>
                <a onclick="goWeixin(this)" data-action="download" class="weui_grid js_grid">
                    <div class="weui_grid_icon">
                        <i class="weui_icon_info_circle"></i>
                    </div>
                    <p class="weui_grid_label">
                        è´¦å•ä¸‹è½½
                    </p>
                </a>
                <a onclick="goWeixin(this)" data-action="jsApi" class="weui_grid js_grid">
                    <div class="weui_grid_icon">
                        <img src="images/icon_nav_select.png" alt="">
                    </div>
                    <p class="weui_grid_label">
                        jsApi
                    </p>
                </a>
                <a href="popup.html" class="weui_grid js_grid">
                    <div class="weui_grid_icon">
                        <img src="images/icon_nav_panel.png" alt="">
                    </div>
                    <p class="weui_grid_label">
                        Popup
                    </p>
                </a>
                <a href="photo-browser.html" class="weui_grid js_grid open-popup">
                    <div class="weui_grid_icon">
                        <img src="images/icon_nav_photo.png" alt="">
                    </div>
                    <p class="weui_grid_label">
                        Photos
                    </p>
                </a>
            </div>
        </div>
        <div id="tab5" class="weui_tab_bd_item">
            <header class='demos-header'>
                <h1 class="demos-title">$$</h1>
                <p class='demos-sub-title'>$$</p>
            </header>
            <div class="weui_grids">
                <a href="" class="weui_grid js_grid">
                    <div class="weui_grid_icon">
                        <img src="images/icon_nav_swiper.png" alt="">
                    </div>
                    <p class="weui_grid_label">
                        $$$$
                    </p>
                </a>
                <a href="" class="weui_grid js_grid">
                    <div class="weui_grid_icon">
                        <img src="images/icon_nav_swiper.png" alt="">
                    </div>
                    <p class="weui_grid_label">
                        $$$$
                    </p>
                </a>
                <a href="" class="weui_grid js_grid">
                    <div class="weui_grid_icon">
                        <img src="images/icon_nav_swiper.png" alt="">
                    </div>
                    <p class="weui_grid_label">
                        $$$$
                    </p>
                </a>
            </div>
            <!-- <div id="about" class='weui-popup-container'>
                <div class="weui-popup-modal">
                    <header class='demos-header'>
                        <h2 class="demos-second-title">å…³äº</h2>
                        <p class="demos-sub-title">By xiong</p>
                    </header>

                    <article class="weui_article">
                        <h1>å¤§æ ‡é¢˜</h1>
                        <section>
                            <h2 class="title">ç« æ ‡é¢˜</h2>
                            <section>
                                <h3>1.1 èŠ‚æ ‡é¢˜</h3>
                                <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
                                    tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
                                    quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo
                                    consequat. Duis aute</p>
                            </section>
                            <section>
                                <h3>1.2 èŠ‚æ ‡é¢˜</h3>
                                <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
                                    tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
                                    cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non
                                    proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
                            </section>
                        </section>
                        <div class="weui_btn_area">
                            <a href="javascript:;" class="weui_btn weui_btn_primary" id="btnStartProgress">ä¸Šå¤©</a>
                        </div>
                        <section>
                            <a href="javascript:;" class="weui_btn weui_btn_plain_primary close-popup">çˆ†ç‚¸</a>
                        </section>
                    </article>
                </div>
            </div> -->
        </div>
    </div>
    <div class="weui_tabbar">
        <a href="#tab1" class="weui_tabbar_item">
            <div class="weui_tabbar_icon">
                <img src="images/icon_nav_button.png" alt="">
            </div>
            <p class="weui_tabbar_label">è®¤è¯</p>
        </a>
        <a href="#tab2" class="weui_tabbar_item">
            <div class="weui_tabbar_icon">
                <img src="images/icon_nav_cell.png" alt="">
            </div>
            <p class="weui_tabbar_label">èµ„æº</p>
        </a>
        <a href="#tab3" class="weui_tabbar_item">
            <div class="weui_tabbar_icon">
                <img src="images/icon_nav_toast.png" alt="">
            </div>
            <p class="weui_tabbar_label">èƒ½åŠ›</p>
        </a>
        <a href="#tab4" class="weui_tabbar_item weui_bar_item_on">
            <div class="weui_tabbar_icon">
                <img src="images/icon_nav_dialog.png" alt="">
            </div>
            <p class="weui_tabbar_label">å…¬ä¼—å·</p>
        </a>
        <a href="#tab5" class="weui_tabbar_item">
            <div class="weui_tabbar_icon">
                <img src="images/icon_nav_select.png" alt="">
            </div>
            <p class="weui_tabbar_label">\(^o^)/~</p>
        </a>
    </div>
</div>


<style>
    .weui_icon_info_circle:before {
        font-size: 28px;
        color: #09BB07;
    }
</style>
<script src="src/lib/jquery-2.1.4.js"></script>
<script src="src/lib/jquery-weui.min.js"></script>
<!-- <script src="src/lib/fastclick.js"></script>
<script>
    $(function () {
        FastClick.attach(document.body);
    });
</script> -->

<!-- å¾®ä¿¡å…¬ä¼—å·çš„ç™»å½•å›è°ƒä»£ç ğŸ‘‡ -->
<script type="text/javascript">
    var weichat = false;
    $(document).ready(function(){
        var urlParams = window.location.href.split('?')[1];
        if(typeof urlParams == "string"){
            var params = urlParams.split("&");
        }
        var object = {};
        if(typeof params != 'undefined'){
            for(var index in params){
                var data = params[index].split('=');
                if(typeof data[0] != 'undefined' && typeof data[1] != 'undefined'){
                    object[data[0]] = data[1];
                }else{
                    console.log('get params fail');
                    return false;
                }
            }
            if(object['openid']){
                weichat = object;
                var loginFlag = $('#weixinLogin');
                loginFlag.html('ç™»å½•å®Œæ¯•');
                loginFlag.css("color","green");
            }
        }
    });
</script>
<!-- å¾®ä¿¡å…¬ä¼—å·çš„è°ƒè¯•ä»£ç ğŸ‘‡ -->
<script type="text/javascript">
    function checkApi($action){
        //è¿˜æœªç™»å½•è¯·æ±‚æ¥å£
        if($action != 'login' && typeof weichat != 'object'){
            $.alert({
                title: "è­¦å‘Š",
                text: "è¯·å…ˆç™»å½•"
            });
            return false;
        }
        //å·²ç»ç™»å½•äº†è¯·æ±‚æ¥å£
        if($action == 'login' && typeof weichat == 'object'){
            $.alert({
                title: "è­¦å‘Š",
                text: "å·²ç»ç™»å½•äº†"
            });
            return false;
        }
        return true;
    }
    //å…¬ä¼—å·è°ƒè¯•
    var $weixinRequestUrl = "http://saxon.ngrok.easoncomm.com/api.php";
    function goWeixin(ele) {
        var $action = $(ele).attr("data-action");
        if(!checkApi($action))return false;
        var $params = weichat;
        $params.action = $action;
        switch ($action) {
            case "login":
                message($action, "å¾®ä¿¡ç™»é™†" , $weixinRequestUrl , $action);
                break;
            case "normalPay":
                messageAjax($action, "ç»Ÿä¸€ä¸‹å•æ”¯ä»˜" , $weixinRequestUrl , $params);
                break;
            case "userInfo":
                messageAjax($action, "ç”¨æˆ·ä¿¡æ¯" , $weixinRequestUrl , $params);
                break;
            case "orderQuery":
                $.confirm({
                      title: 'é€‰å¡«ä¸€ä¸ªå‚æ•°',
                      text: 'å¾®ä¿¡è®¢å•å·:<input id="transaction_id" type="text"/><br/>å•†æˆ·è®¢å•å·:<input  type="text" id="out_trade_no"/>',
                      onOK: function (input) {
                        $params['transaction_id'] = $("#transaction_id").val();
                        $params['out_trade_no'] = $("#out_trade_no").val();
                        //ç‚¹å‡»ç¡®è®¤
                        messageAjax($action, "" , $weixinRequestUrl , $params);
                      },
                      onCancel: function () {
                        //ç‚¹å‡»å–æ¶ˆ
                      }
                    });
                break;
            case "orderRefund":
                $.confirm({
                      title: 'å¾®ä¿¡è®¢å•å·å’Œå•†æˆ·è®¢å•å·é€‰å¡«',
                      text: 'å¾®ä¿¡è®¢å•å·:<input id="transaction_id" type="text"/><br/>å•†æˆ·è®¢å•å·:<input  type="text" id="out_trade_no"/><br/>è®¢å•æ€»é‡‘é¢:<input id="total_fee" type="text"/><br/>é€€æ¬¾é‡‘é¢:<input id="refund_fee" type="text"/>',
                      onOK: function (input) {
                        $params['transaction_id'] = $("#transaction_id").val();
                        $params['out_trade_no'] = $("#out_trade_no").val();
                        $params['total_fee'] = $("#total_fee").val();
                        $params['refund_fee'] = $("#refund_fee").val();
                        //ç‚¹å‡»ç¡®è®¤
                        messageAjax($action, "" , $weixinRequestUrl , $params);
                      },
                      onCancel: function () {
                        //ç‚¹å‡»å–æ¶ˆ
                      }
                    });
                break;
            case "refundQuery":
                $.confirm({
                      title: '4é€‰1',
                      text: 'å¾®ä¿¡è®¢å•å·:<input id="transaction_id" type="text"/><br/>å•†æˆ·è®¢å•å·:<input  type="text" id="out_trade_no"/><br/>å•†æˆ·é€€æ¬¾å•å·:<input id="out_refund_no" type="text"/><br/>å¾®ä¿¡é€€æ¬¾å•å·:<input id="refund_id" type="text"/>',
                      onOK: function (input) {
                        $params['transaction_id'] = $("#transaction_id").val();
                        $params['out_trade_no'] = $("#out_trade_no").val();
                        $params['out_refund_no'] = $("#out_refund_no").val();
                        $params['refund_id'] = $("#refund_id").val();
                        //ç‚¹å‡»ç¡®è®¤
                        messageAjax($action, "" , $weixinRequestUrl , $params);
                      },
                      onCancel: function () {
                        //ç‚¹å‡»å–æ¶ˆ
                      }
                    });
                break;
            case "download":
                $.confirm({
                      title: 'æ—¥æœŸæ ¼å¼20170626',
                      text: 'å¯¹è´¦æ—¥æœŸ:<input id="bill_date" type="text"/><br/>è´¦å•ç±»å‹:<select id="bill_type"><option value ="ALL">æ‰€æœ‰è®¢å•ä¿¡æ¯</option><option value ="SUCCESS">æˆåŠŸæ”¯ä»˜çš„è®¢å•</option><option value="REFUND">é€€æ¬¾è®¢å•</option><option value="REVOKED">æ’¤é”€çš„è®¢å•</option></select>',
                      onOK: function (input) {
                        $params['bill_date'] = $("#bill_date").val();
                        $params['bill_type'] = $('#bill_type option:selected') .val();
                        console.log($params);
                        //ç‚¹å‡»ç¡®è®¤
                        messageAjax($action, "" , $weixinRequestUrl , $params);
                      },
                      onCancel: function () {
                        //ç‚¹å‡»å–æ¶ˆ
                      }
                    });
                break;
            case "jsApi":
                $params.url = window.location.href;
                messageAjax($action, "jsApi",$weixinRequestUrl , $params);
                break;
            default:
                messageAjax($action, "äººç±»è¦å®Œè›‹äº†ï¼" , $weixinRequestUrl , $params);
        }
    }
    function showResult(results){
        var show = [];
        for(var index in results){
            if(typeof results[index] == "string")
            show.push({
                text: index+":"+results[index],
                className: "color-success",
            });
        }
        $.actions({actions:show});
        /*var show = "";
        for(var index in results){
            show += "<div>"+index+":"+results[index]+"</div>";
        }
        show = "<h1>ç»“æœ:</h1>" + show;
        $.confirm(show, "è‡ªå®šä¹‰çš„æ ‡é¢˜");*/
    }
    function messageAjax($title, $content, $url,$params) {
        //å¦‚æœå‚æ•°è¿‡å¤šï¼Œé€šè¿‡ object æ–¹å¼ä¼ å…¥
        $.alert({
            title: $title,
            text: $content,
            onOK: function () {
                $.post($url,$params,function(results){
                    console.log(results);
                    showResult(results);
                    //è¿”å›å‚æ•°ä¸­æœ‰æ”¯ä»˜å°±å»æ”¯ä»˜
                    if(typeof results.jsPayParameters != "undefined"){
                        $.confirm({
                          title: 'æ”¯ä»˜',
                          text: 'æ”¯ä»˜1æ¯›',
                          onOK: function () {
                            //ç‚¹å‡»ç¡®è®¤
                            callpay(JSON.parse(results.jsPayParameters));
                          },
                          onCancel: function () {}
                        });
                    }
                    //è¿”å›å‚æ•°ä¸­æœ‰jsApiå°±æ³¨å†Œé¡µé¢
                    if(typeof results.jsapi_ticket != "undefined"){
                        $.confirm({
                          title: 'æ³¨å†Œé¡µé¢',
                          text: 'æ³¨å†ŒjsApi',
                          onOK: function () {
                            //æ³¨å†Œé¡µé¢
                            jsApi(results);
                          },
                          onCancel: function () {}
                        });
                    }
                },'json');
            },
            autoClose: true
        });
    }

</script>
<script src="http://res.wx.qq.com/open/js/jweixin-1.2.0.js"></script>
<script>
    function jsApi($jsSDK){
        console.log($jsSDK);
        wx.config({
            debug: true, // å¼€å¯è°ƒè¯•æ¨¡å¼,è°ƒç”¨çš„æ‰€æœ‰apiçš„è¿”å›å€¼ä¼šåœ¨å®¢æˆ·ç«¯alertå‡ºæ¥ï¼Œè‹¥è¦æŸ¥çœ‹ä¼ å…¥çš„å‚æ•°ï¼Œå¯ä»¥åœ¨pcç«¯æ‰“å¼€ï¼Œå‚æ•°ä¿¡æ¯ä¼šé€šè¿‡logæ‰“å‡ºï¼Œä»…åœ¨pcç«¯æ—¶æ‰ä¼šæ‰“å°ã€‚
            appId: $jsSDK.appId, // å¿…å¡«ï¼Œå…¬ä¼—å·çš„å”¯ä¸€æ ‡è¯†
            timestamp: $jsSDK.timeStamp, // å¿…å¡«ï¼Œç”Ÿæˆç­¾åçš„æ—¶é—´æˆ³
            nonceStr: $jsSDK.nonceStr, // å¿…å¡«ï¼Œç”Ÿæˆç­¾åçš„éšæœºä¸²
            signature: $jsSDK.sign,// å¿…å¡«ï¼Œç­¾åï¼Œè§é™„å½•1
            jsApiList: [] // å¿…å¡«ï¼Œéœ€è¦ä½¿ç”¨çš„JSæ¥å£åˆ—è¡¨ï¼Œæ‰€æœ‰JSæ¥å£åˆ—è¡¨è§é™„å½•2
        });
        wx.ready(function(){
            //è°ƒç”¨æ¥å£
        });
    }
</script>
<script type="text/javascript">
    //è°ƒç”¨å¾®ä¿¡JS api æ”¯ä»˜
        function jsApiCall(jsApiParameters)
        {
            WeixinJSBridge.invoke(
                'getBrandWCPayRequest',
                jsApiParameters,
                function(res){
                    var showMsg = '';
                    for(var key in res){
                        showMsg = showMsg + key + ":" + res[key] + "<br/>";
                    }
                    $.alert({
                        title:'æ”¯ä»˜å®Œæˆåè¿”å›å‚æ•°',
                        text:showMsg
                    });
//                    WeixinJSBridge.log(res.err_msg);
//                    alert(res.err_code+res.err_desc+res.err_msg);
                }
            );
        }

        function callpay(jsApiParameters)
        {
            if (typeof WeixinJSBridge == "undefined"){
                if( document.addEventListener ){
                    document.addEventListener('WeixinJSBridgeReady', jsApiCall, false);
                }else if (document.attachEvent){
                    document.attachEvent('WeixinJSBridgeReady', jsApiCall);
                    document.attachEvent('onWeixinJSBridgeReady', jsApiCall);
                }
            }else{
                jsApiCall(jsApiParameters);
            }
        }
</script>
<!-- å¾®ä¿¡ä¼ä¸šå·çš„è°ƒè¯•ä»£ç ğŸ‘‡ -->
<script type="text/javascript">
    //ä¼ä¸šå·è°ƒè¯•
    var $requestUrl = "http://123.207.2.19:666/index.php";

    function tempFile() {
        var url = $requestUrl + "?action=uploadTemp";
        var pams = [];
        pams.push($('<input>', {name: 'upload', type: 'file'}));
        var form = $('<form>', {
            method: 'post',
            enctype: 'multipart/form-data',
            action: url
        }).append(pams);
        var fileInput = $(form).find("input[name='upload']");
        fileInput.click();
        fileInput.change(function () {
            form.submit();
        });
        //$("#tempFile").click();
    }
    function foreverFile() {
        var url = $requestUrl + "?action=uploadForever";
        var pams = [];
        pams.push($('<input>', {name: 'upload', type: 'file'}));
        var form = $('<form>', {
            method: 'post',
            enctype: 'multipart/form-data',
            action: url
        }).append(pams);
        var fileInput = $(form).find("input[name='upload']");
        fileInput.click();
        fileInput.change(function () {
            form.submit();
        });
    }

    function goApi(ele) {
        console.log(ele);
        var $action = $(ele).attr("data-action");
        console.log($action);
        switch ($action) {
            case "userInfo":
                message($action, "è·å–ç”¨æˆ·çš„ä¿¡æ¯" , $requestUrl , $action);
                break;
            case "login":
                message($action, "ç™»å…¥å¿…é¡»æœ‰ç¬¬ä¸‰æ–¹åº”ç”¨ï¼" , $requestUrl , $action);
                break;
            case "getAgent":
                message($action, "è·å–å¯¹åº”åº”ç”¨çš„ä¿¡æ¯" , $requestUrl , $action);
                break;
            case "setAgent":
                message($action, "åªè®¾ç½®åº”ç”¨çš„åå­—æ˜¯æ²¡ç”¨çš„ï¼" , $requestUrl , $action);
                break;
            case "getAgents":
                message($action, "è·å–æ‰€æœ‰åº”ç”¨çš„ä¿¡æ¯ï¼" , $requestUrl , $action);
                break;
            case "getMenu":
                message($action, "è·å–å¯¹åº”åº”ç”¨çš„èœå•ä¿¡æ¯ï¼ˆå›è°ƒçš„èœå•è®¾ç½®å®Œäº†åæ²¡å‘å¸ƒèœå•è·å–åˆ°çš„æ˜¯æ²¡æœ‰å›è°ƒçš„èœå•å›§ï¼ï¼‰", $action);
                break;
            case "getContact":
                message($action, "è·å–é€šä¿¡æ’¸ä¸­çš„éƒ¨é—¨å’Œå­éƒ¨é—¨" , $requestUrl , $action);
                break;
            case "getUser":
                message($action, "è·å–æˆå‘˜", $action);
                break;
            case "getBranchUser":
                message($action, "è·å–éƒ¨é—¨æˆå‘˜ä¿¡æ¯" , $requestUrl , $action);
                break;
            case "getBranchUserDetail":
                message($action, "è·å–éƒ¨é—¨æˆå‘˜ä¿¡æ¯è¯¦æƒ…" , $requestUrl , $action);
                break;
            case "getFodder":
                message($action, "è·å–ç´ æçš„ç§ç±»ä¸ªä¸ªæ•°" , $requestUrl , $action);
                break;
            case "getFodderDetail":
                message($action, "è·å–æŸä¸ªç´ æçš„ä¸ªæ•°" , $requestUrl , $action);
                break;
            case "delUpload":
                message($action, "åˆ é™¤æ‰€æœ‰çš„æ°¸ä¹…å›¾ç‰‡èµ„æº" , $requestUrl , $action);
                break;
            default:
                message($action, "äººç±»è¦å®Œè›‹äº†ï¼" , $requestUrl , $action);
        }
    }

    function message($title, $content, $url,$action) {
        //å¦‚æœå‚æ•°è¿‡å¤šï¼Œé€šè¿‡ object æ–¹å¼ä¼ å…¥
        $.alert({
            title: $title,
            text: $content,
            onOK: function () {
                document.location.href = $url + "?action=" + $action;
            }
        });
    }
</script>
</body>

</html>
